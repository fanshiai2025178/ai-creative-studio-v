# AI Creative Studio - å®Œæ•´éƒ¨ç½²æ–¹æ¡ˆ

## çŠ¶æ€è¯´æ˜Ž

âœ… **å·²å®Œæˆ**:
- ä»£ç å·²æ‰“åŒ…: `f:\ai-creative-studio-deploy.zip` (12.88 MB)
- SSH å¯†é’¥å·²ç”Ÿæˆ: `C:\Users\Administrator\.ssh\id_rsa`
- éƒ¨ç½²è„šæœ¬å·²åˆ›å»º

âš ï¸ **éœ€è¦æ‚¨æ“ä½œ**: ç”±äºŽå®‰å…¨é™åˆ¶ï¼Œéœ€è¦æ‚¨æ‰‹åŠ¨æ‰§è¡Œä»¥ä¸‹æ­¥éª¤

---

## æ–¹æ¡ˆ A: ä¸€æ¬¡æ€§è®¾ç½® SSH å¯†é’¥ï¼ˆæŽ¨èï¼Œä¹‹åŽæ°¸ä¹…æ— å¯†ç ï¼‰

### æ­¥éª¤ 1: ä¸Šä¼  SSH å…¬é’¥ï¼ˆåªéœ€æ‰§è¡Œä¸€æ¬¡ï¼‰

æ‰“å¼€ **PowerShell** æˆ– **å‘½ä»¤æç¤ºç¬¦**ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

```powershell
ssh root@72.61.74.232 "mkdir -p ~/.ssh && chmod 700 ~/.ssh"
```

è¾“å…¥å¯†ç : `sjbw8888@1989827Y`

ç„¶åŽæ‰§è¡Œï¼š

```powershell
type C:\Users\Administrator\.ssh\id_rsa.pub | ssh root@72.61.74.232 "cat >> ~/.ssh/authorized_keys && chmod 600 ~/.ssh/authorized_keys"
```

å†æ¬¡è¾“å…¥å¯†ç : `sjbw8888@1989827Y`

### æ­¥éª¤ 2: æµ‹è¯•æ— å¯†ç ç™»å½•

```powershell
ssh root@72.61.74.232 "echo 'Success!'"
```

å¦‚æžœä¸éœ€è¦å¯†ç å³å¯è¿žæŽ¥ï¼Œè¯´æ˜Žè®¾ç½®æˆåŠŸï¼

### æ­¥éª¤ 3: è‡ªåŠ¨éƒ¨ç½²ï¼ˆæ— éœ€å¯†ç ï¼‰

```powershell
cd f:\ai-creative-studio-v
powershell -ExecutionPolicy Bypass -File deploy-auto.ps1
```

ðŸŽ‰ **å®ŒæˆåŽï¼Œä»¥åŽçš„éƒ¨ç½²éƒ½ä¸éœ€è¦å¯†ç äº†ï¼**

---

## æ–¹æ¡ˆ B: æ‰‹åŠ¨éƒ¨ç½²ï¼ˆæ¯æ¬¡éœ€è¦è¾“å…¥å¯†ç ä¸¤æ¬¡ï¼‰

å¦‚æžœä¸æƒ³è®¾ç½® SSH å¯†é’¥ï¼Œå¯ä»¥æ¯æ¬¡æ‰‹åŠ¨éƒ¨ç½²ï¼š

### ç¬¬ 1 æ­¥: ä¸Šä¼ æ–‡ä»¶

```cmd
scp f:\ai-creative-studio-deploy.zip root@72.61.74.232:/tmp/
```

**è¾“å…¥å¯†ç **: `sjbw8888@1989827Y`

### ç¬¬ 2 æ­¥: è¿žæŽ¥æœåŠ¡å™¨

```cmd
ssh root@72.61.74.232
```

**è¾“å…¥å¯†ç **: `sjbw8888@1989827Y`

### ç¬¬ 3 æ­¥: æ‰§è¡Œéƒ¨ç½²å‘½ä»¤

è¿žæŽ¥æˆåŠŸåŽï¼Œ**å¤åˆ¶ç²˜è´´** ä»¥ä¸‹æ‰€æœ‰å‘½ä»¤ï¼š

```bash
pm2 stop all 2>/dev/null || true
pm2 delete all 2>/dev/null || true
cd /var/www/ai-creative-studio
rm -rf *
unzip -o /tmp/ai-creative-studio-deploy.zip -d .

cat > .env << 'ENVEOF'
DATABASE_URL=mysql://ai_user:FanShai2026DB@Pass@72.61.74.232:3306/ai_creative_studio
JWT_SECRET=your-super-secret-jwt-key-2026
PORT=3000
NODE_ENV=production
ENVEOF

pnpm install
pnpm run build
pnpm run db:push
pm2 start dist/index.js --name ai-creative-studio
pm2 save
pm2 status
```

---

## æ–¹æ¡ˆ C: ä½¿ç”¨ WinSCPï¼ˆå›¾å½¢ç•Œé¢ï¼Œæœ€ç®€å•ï¼‰

### 1. ä¸‹è½½å¹¶å®‰è£… WinSCP
https://winscp.net/

### 2. æ–°å»ºè¿žæŽ¥
- **æ–‡ä»¶åè®®**: SCP
- **ä¸»æœºå**: 72.61.74.232
- **ç«¯å£**: 22
- **ç”¨æˆ·å**: root
- **å¯†ç **: sjbw8888@1989827Y

### 3. ä¸Šä¼ æ–‡ä»¶
å°† `f:\ai-creative-studio-deploy.zip` æ‹–æ‹½åˆ°æœåŠ¡å™¨çš„ `/tmp/` ç›®å½•

### 4. æ‰“å¼€ WinSCP ç»ˆç«¯
æŒ‰ Ctrl+T æ‰“å¼€ç»ˆç«¯ï¼Œç²˜è´´æ–¹æ¡ˆ B çš„ç¬¬ 3 æ­¥å‘½ä»¤

---

## éƒ¨ç½²åŽéªŒè¯

### è®¿é—®ç½‘ç«™
- **ä¸»é¡µ**: http://fansai.online
- **API**: http://fansai.online/api/trpc

### æ£€æŸ¥çŠ¶æ€

```bash
# SSH è¿žæŽ¥æœåŠ¡å™¨
ssh root@72.61.74.232

# æŸ¥çœ‹åº”ç”¨çŠ¶æ€
pm2 status
pm2 logs ai-creative-studio --lines 50

# æŸ¥çœ‹ Nginx æ—¥å¿—
tail -f /var/log/nginx/error.log
```

---

## å¸¸è§é—®é¢˜è§£å†³

### Q1: æž„å»ºå¤±è´¥
```bash
cd /var/www/ai-creative-studio
pm2 logs ai-creative-studio
# æŸ¥çœ‹é”™è¯¯ä¿¡æ¯ï¼Œå¯èƒ½æ˜¯ä¾èµ–å®‰è£…å¤±è´¥
pnpm install --force
pnpm run build
pm2 restart ai-creative-studio
```

### Q2: ç«¯å£å ç”¨
```bash
# æŸ¥çœ‹ç«¯å£å ç”¨
lsof -i :3000
# æˆ–
netstat -tlnp | grep 3000
```

### Q3: æ•°æ®åº“è¿žæŽ¥å¤±è´¥
```bash
# æµ‹è¯•æ•°æ®åº“è¿žæŽ¥
mysql -h 72.61.74.232 -u ai_user -p'FanShai2026DB@Pass' ai_creative_studio
```

### Q4: Nginx 502 é”™è¯¯
```bash
# æ£€æŸ¥åº”ç”¨æ˜¯å¦è¿è¡Œ
pm2 status

# é‡å¯ Nginx
systemctl restart nginx

# æŸ¥çœ‹ Nginx é”™è¯¯æ—¥å¿—
tail -f /var/log/nginx/error.log
```

---

## å¿«é€Ÿå‘½ä»¤å‚è€ƒ

| æ“ä½œ | å‘½ä»¤ |
|------|------|
| æŸ¥çœ‹åº”ç”¨çŠ¶æ€ | `pm2 status` |
| æŸ¥çœ‹å®žæ—¶æ—¥å¿— | `pm2 logs ai-creative-studio` |
| é‡å¯åº”ç”¨ | `pm2 restart ai-creative-studio` |
| åœæ­¢åº”ç”¨ | `pm2 stop ai-creative-studio` |
| é‡è½½ Nginx | `systemctl reload nginx` |
| æŸ¥çœ‹ç³»ç»Ÿèµ„æº | `htop` æˆ– `top` |

---

## æŽ¨èæµç¨‹

**é¦–æ¬¡éƒ¨ç½²**: ä½¿ç”¨ **æ–¹æ¡ˆ A**ï¼ˆè®¾ç½® SSH å¯†é’¥ï¼‰
**ä¼˜ç‚¹**: 
- ä¸€æ¬¡è®¾ç½®ï¼Œæ°¸ä¹…ä½¿ç”¨
- ä»¥åŽéƒ¨ç½²åªéœ€ä¸€ä¸ªå‘½ä»¤
- å®‰å…¨æ€§æ›´é«˜

**æ—¥å¸¸æ›´æ–°**: 
```powershell
cd f:\ai-creative-studio-v
powershell -File deploy-auto.ps1
```

---

## æŠ€æœ¯æ”¯æŒ

å¦‚æžœé‡åˆ°é—®é¢˜ï¼Œè¯·æä¾›ï¼š
1. é”™è¯¯æˆªå›¾
2. `pm2 logs` è¾“å‡º
3. `pm2 status` è¾“å‡º
4. Nginx é”™è¯¯æ—¥å¿—ï¼ˆå¦‚æžœæ˜¯ 502/504 é”™è¯¯ï¼‰
