# AI Creative Studio - 部署步骤（简化版）

## 准备工作 ✅
- ✅ 代码已打包: `f:\ai-creative-studio-deploy.zip` (12.88 MB)
- ✅ 服务器信息已确认
- ✅ 部署命令已准备

## 方式一：使用命令行（推荐）

### 第 1 步：上传文件

打开 **命令提示符** 或 **PowerShell**，执行：

```cmd
scp f:\ai-creative-studio-deploy.zip root@72.61.74.232:/tmp/
```

**输入密码**: `sjbw8888@1989827Y`

等待上传完成（约需 1-2 分钟）。

### 第 2 步：连接服务器

```cmd
ssh root@72.61.74.232
```

**输入密码**: `sjbw8888@1989827Y`

### 第 3 步：执行部署

连接成功后，**复制粘贴** 以下所有命令（一次性粘贴）：

```bash
# 停止现有应用
pm2 stop all 2>/dev/null || true
pm2 delete all 2>/dev/null || true

# 清理并解压新代码
cd /var/www/ai-creative-studio
rm -rf *
unzip -o /tmp/ai-creative-studio-deploy.zip -d .

# 创建配置文件
cat > .env << 'ENVEOF'
DATABASE_URL=mysql://ai_user:FanShai2026DB@Pass@72.61.74.232:3306/ai_creative_studio
JWT_SECRET=your-super-secret-jwt-key-2026
PORT=3000
NODE_ENV=production
ENVEOF

# 安装依赖并构建
pnpm install
pnpm run build

# 数据库迁移
pnpm run db:push

# 启动应用
pm2 start dist/index.js --name ai-creative-studio
pm2 save

# 查看状态
pm2 status
pm2 logs ai-creative-studio --lines 50
```

### 第 4 步：验证部署

访问: **http://fansai.online**

---

## 方式二：使用 WinSCP（图形界面）

如果您不熟悉命令行，可以使用 WinSCP：

1. 下载并安装 [WinSCP](https://winscp.net/)
2. 新建连接:
   - **主机**: 72.61.74.232
   - **用户名**: root
   - **密码**: sjbw8888@1989827Y
3. 上传 `f:\ai-creative-studio-deploy.zip` 到 `/tmp/`
4. 使用 WinSCP 的终端功能执行第 3 步的命令

---

## 常见问题

### Q: 如果构建失败怎么办？
```bash
# 查看详细日志
pm2 logs ai-creative-studio

# 检查 Node.js 版本
node -v  # 应该是 v18 或更高
pnpm -v
```

### Q: 如何查看应用状态？
```bash
pm2 status
pm2 logs ai-creative-studio
```

### Q: 如何重启应用？
```bash
pm2 restart ai-creative-studio
```

### Q: 数据库连接失败？
```bash
# 测试数据库连接
mysql -h 72.61.74.232 -u ai_user -p'FanShai2026DB@Pass' ai_creative_studio
```

---

## 快速命令参考

| 操作 | 命令 |
|------|------|
| 查看状态 | `pm2 status` |
| 查看日志 | `pm2 logs ai-creative-studio` |
| 重启应用 | `pm2 restart ai-creative-studio` |
| 停止应用 | `pm2 stop ai-creative-studio` |
| 查看 Nginx 日志 | `tail -f /var/log/nginx/error.log` |

---

## 需要帮助？

如果遇到问题，请提供：
1. 错误信息截图
2. `pm2 logs` 的输出
3. `pm2 status` 的输出
